DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'Xipu.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201808200736427_initdb'
BEGIN
    CREATE TABLE [dbo].[Chefs] (
        [Id] [int] NOT NULL IDENTITY,
        [CreateOn] [datetime] NOT NULL,
        [ClientIp] [nvarchar](64),
        [UserName] [nvarchar](64),
        [PhoneNumber] [nvarchar](20),
        [Province] [nvarchar](20),
        [Cuisine] [nvarchar](20),
        [Entrypoint] [nvarchar](20),
        CONSTRAINT [PK_dbo.Chefs] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [IX_PhoneNumber] ON [dbo].[Chefs]([PhoneNumber])
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201808200736427_initdb', N'Xipu.Migrations.Configuration',  0x1F8B0800000000000400CD58DB8EDB36107D2FD07F20F4BCB16C6F51B4869C606B670BA3F1EE227282BED2D2D8264A910A492D6C04FDB23EF493F20B19EA7EB1D717788B625F56A39933C3E1F0F058DFFEF9D77BB78D387906A599146367D0EB3B0444204326D6632731AB37BF38EFDEFEF883F73E8CB6E473E1776BFD3052E8B1B331261EB9AE0E361051DD8B58A0A4962BD30B64E4D250BAC37EFF5777307001211CC422C4FB9808C322481FF071224500B149289FCB10B8CEEDF8C64F51C9038D40C73480B1F3278B935EE6E6903BCE2896E0035F39840A210D3558E0E89306DF2829D67E8C06CA17BB18D06F45B986BCF051E57EEA1AFA43BB06B70A2CA082441B199D0938B8CD9BE2B6C32F6AAD53360DDBF61EDB6B7676D569EBC6CE6403D8A176A2D1842BEBD4E86ACFFADE106BB929771C07C3FEDD9049C24DA2602C20318AF21BF2942C390BFE80DD42FE05622C12CEEBA56031F8AE6140D393923128B3FB08ABBCC059E810B719E7B603CBB05A4C56FE4C98DBA1431E30395D722877BAB654DF4805BF8300450D844FD41850C26240DAAB4EF656AE89028C7B1445C6293E2D7084F7243D02C419669CC50510CE299E3587CCE9F60388B5D98C9D9F7F72C83DDB42581872E04F82E1C9C418A392A379F00828FBDF6BE779DA48010F49B404F542AA61FF1AA9947C66C814AF9D679230CDC4ABA7C143AA76B164C25C3793E756C7BF4B0AC8B586E2EA545E853DE7D3A5B5C2D6ECA1089CA39C25749EACB9A80CD50753631A64E6AA848C9E7B1903EDABB3ACA8A27D37E3FDE27E700F5C10DE9CC63176AC7661E416E267B7C5E48D7F3E9B4619861BE83DA45A565B664262A16B68BDC5D458E93D53DA2055D025B59B3609A38E5BB3FF077A5BE4AAB7B8CDA955C70B6FFB7FB5C9757A6F07578DBBC7B5444850E9B2A02C20BF413A61E9154D39557BA8792279128943F4FE527445B6758CCA7A0652C9B60DA4D27A3A52C5A775A4CA7A3A528331EB608D1767E095B4D8002BAD6774AB20BE46B30AE3E9387566AB43D5ED5D34CF6DCD607BC2DDCE88B70443FBBCBC44366D97327B493A2D72F1F2837E5CA2764E7EE6E290744F427BEAFD9D3610F5AC43CFFFC2B381AC1CE654B0156893692ABC0406C396D8FDFF084F57EB909FA03EFF7351988ED951D977AE7C6BE9C0109FCC3574A078A62AD850D5516815EE25B2EF4AB07B545E85DCD10C3311C276EC7C25338D3AE54B0223B2C024E4EF8EB439B38A9600DCBBB8F3615B7AEF4AA85D797711F0796AAE2B3A8EABB583622DA32D9CF1A5C4256405E6F2EE421DD7A550CFAD7F0BF0A6A0D9BA82B05F06040476A82AD0C2672656B2E839AEA85E51E1D2DA9239188A0796DE29C3563430F83A00AD53CDFD99F2C4EE1A8E7838138F89891373A735444BDEF871E8B92FE74FC56AB366EF31B64FFA1A4BC032599832D06F09E36159F77D97730E41D819C91911ABC2DF1C08B7DE95480FB27DD91F02CADB37851884E5D30544314730FD287CFA0C97D486F4F501D634D81537E16190E31BD16CBB376574AD68A4738C2ADE7EDF72ED07AEB7DF0138D8690C12130000 , N'6.2.0-61023')
END

